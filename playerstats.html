<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Stats</title>
</head>
<body>

<h1>Player Stats</h1>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>GW Pts</th>
            <th>Pts</th>
            <th>Goals</th>
            <th>Assists</th>
            <th>Clean Sheets</th>
            <th>Pos</th>
            <th>Team</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>





<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
 
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDO2nmJ-Rx4eZh-x8gUmjbAQqFwUfk59wE",
  authDomain: "nydda-fantasy-dtbase.firebaseapp.com",
  projectId: "nydda-fantasy-dtbase",
  storageBucket: "nydda-fantasy-dtbase.appspot.com",
  messagingSenderId: "516798929727",
  appId: "1:516798929727:web:56e0af73e1f010e573918a",
  measurementId: "G-SPWWSD3QPW"
};
firebase.initializeApp(firebaseConfig);
</script>

<script src="points_functions.js"></script>

<script>

function showPlayerEl(doc) {
    let rounds = doc.data().goalsInRound.length
    let tbodyEl = document.querySelector('tbody')
    let trEl = document.createElement('tr')

    let tdEl = document.createElement('td')
    tdEl.innerHTML = doc.data().name
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = calcPointsRound(rounds-1,doc.data().goalsInRound,doc.data().assistsInRound,doc.data().MOTM,doc.data().CSInRound)
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = calcPoints(rounds, doc.data().goalsInRound, doc.data().assistsInRound, doc.data().MOTM, doc.data().CSInRound)
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = countFunc(doc.data().goalsInRound)
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = countFunc(doc.data().assistsInRound)
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = countFunc(doc.data().CSInRound)
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = posFunc(doc.data().keeper)
    trEl.appendChild(tdEl)

    tdEl = document.createElement('td')
    tdEl.innerHTML = doc.data().team
    trEl.appendChild(tdEl)

    tbodyEl.appendChild(trEl)
}

let db = firebase.firestore();

db.collection("players").get().then((snapshot) => {
    let documents = snapshot.docs;
    for (j = 0; j < documents.length;j++) {
        showPlayerEl(documents[j])
    }
});
    
    </script>

</body>
</html>